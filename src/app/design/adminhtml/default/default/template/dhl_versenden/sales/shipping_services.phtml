<?php
/**
 * See LICENSE.md for license details.
 */
?>
<?php /** @var Dhl_Versenden_Block_Adminhtml_Sales_Order_Shipment_Service $this */ ?>
<?php $services = $this->getServices() ?>
<?php if (!empty($services)): ?>
    <?php
    // Split services: plain booleans and read-only left, services with inputs right.
    $booleanServices = [];
    $inputServices = [];
    foreach ($services as $service) {
        $renderer = $this->getRenderer($service);
        $entry = ['service' => $service, 'renderer' => $renderer];
        if ($service->getFrontendInputType() === 'boolean' || $renderer->isReadOnly()) {
            $booleanServices[] = $entry;
        } else {
            $inputServices[] = $entry;
        }
    }
    ?>
    <div id="packaging-dhlversenden-services">
        <div><?php echo $this->escapeHtml($this->__('Services')) ?></div>
        <div class="services-columns">
            <div class="services-column services-checkbox">
                <dl>
                    <?php foreach ($booleanServices as $entry): ?>
                        <?php $service = $entry['service']; $renderer = $entry['renderer']; ?>
                        <dt class="service-<?php echo $service->getFrontendInputType() . ' ' . $service::CODE; ?>" data-service-code="<?php echo $service::CODE; ?>">
                            <?php echo $renderer->getSelectorHtml(); ?>
                            <?php echo $renderer->getLabelHtml(); ?>
                        </dt>
                        <dd class="service-<?php echo $service->getFrontendInputType() . ' ' . $service::CODE; ?>" data-service-code="<?php echo $service::CODE; ?>">
                            <?php echo $renderer->getValueHtml(); ?>
                        </dd>
                    <?php endforeach; ?>
                </dl>
            </div>
            <?php if (!empty($inputServices)): ?>
            <div class="services-column services-input">
                <dl>
                    <?php foreach ($inputServices as $entry): ?>
                        <?php $service = $entry['service']; $renderer = $entry['renderer']; ?>
                        <dt class="service-<?php echo $service->getFrontendInputType() . ' ' . $service::CODE; ?>" data-service-code="<?php echo $service::CODE; ?>">
                            <?php echo $renderer->getSelectorHtml(); ?>
                            <?php echo $renderer->getLabelHtml(); ?>
                        </dt>
                        <dd class="service-<?php echo $service->getFrontendInputType() . ' ' . $service::CODE; ?>" data-service-code="<?php echo $service::CODE; ?>">
                            <?php echo $renderer->getValueHtml(); ?>
                        </dd>
                    <?php endforeach; ?>
                </dl>
            </div>
            <?php endif; ?>
        </div>
    </div>
<?php endif; ?>
